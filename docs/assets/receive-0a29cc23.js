import{a9 as h,a4 as P,e as k,a8 as E,q as _,G as I,y as c,v as l,x as o,H as F,a7 as r,a2 as U}from"./index-aee8b421.js";import{c as L,E as p,a as S,b as W,d as z,e as $,f as N,g as R}from"./el-table-column-b74a346d.js";import{b as A,c as O,a as M,E as T}from"./el-input-5839b881.js";import{T as B,a as D}from"./TPaginationSelect-d8f89ed6.js";/* empty css                   */function K(e){return h({url:"/mall/ums-member-receive-address/page",method:"post",data:e})}function q(e){return h({url:`/mall/ums-member-receive-address/one/${e}`,method:"get"})}function G(e){return h({url:`/mall/ums-member-receive-address/del/${e}`,method:"get"})}function H(e){return h({url:"/mall/ums-member-receive-address/add",method:"post",data:e})}function j(e){return h({url:"/mall/ums-member-receive-address/edit",method:"post",data:e})}const J=k({data(){return{receives:[],page:{total:0,current:1,size:10},selectPage:{total:0,current:1,size:6,pagerCount:5},searchId:null,dialogFormVisible:!1,receive:{city:"",defaultStatus:0,detailAddress:"",id:0,name:"",phoneNumber:"",postCode:"",province:"",region:""},members:[],formLabelWidth:80}},mounted(){this.getReceivesPage(1),this.getMembersPage(1)},components:{"t-pagination-select":B},methods:{search(){if(this.searchId==null||this.searchId==""){alert("请输入地址编号后查询");return}q(this.searchId).then(e=>{e.data==null?this.receives=[]:(this.receives=[],this.receives.push(e.data.help))}).catch(e=>{console.log(e)})},research(){this.searchId=null,this.getReceivesPage(1)},toEdit(e){this.dialogFormVisible=!0,this.receive=L(e)},getMembersPage(e){D({current:e,size:6}).then(s=>{const u=s.data.page;this.members=u.records,this.selectPage=u}).catch(s=>{console.log(s)})},pageChange(e){this.getMembersPage(e)},getReceivesPage(e){K({current:e,size:10}).then(s=>{console.log(s);const u=s.data.page;this.receives=u.records,this.page=u}).catch(s=>{console.log(s)})},currentchange(e){this.getReceivesPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&console.log(e),console.log(e),G(e).then(a=>{if(a.success)this.getReceivesPage(this.page.current);else return!1}).catch(a=>{})},toAdd(){this.dialogFormVisible=!0,this.receive={city:"",defaultStatus:0,detailAddress:"",id:0,name:"",phoneNumber:"",postCode:"",province:"",region:""}},save(){const e=this.receive;e.id==0?H(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getReceivesPage(this.page.current),p(a.msg);else return p(a.msg),!1}).catch(a=>{p("网络错误联系管理员")}):j(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getReceivesPage(this.page.current),p(a.msg);else return p(a.msg),!1}).catch(a=>{p("网络错误联系管理员")})}}}),Q={style:{"margin-top":"10px"}},X={style:{width:"95%",margin:"0 auto"}},Y={class:"dialog-footer"};function Z(e,a,s,u,x,ee){const n=M,d=A,m=O,i=$,b=S,f=W,v=E("t-pagination-select"),g=N,w=R,V=T,y=z;return _(),I(F,null,[c("div",Q,[c("div",X,[l(d,{label:"地址编号","label-width":80,style:{display:"inline-flex","margin-right":"10px"}},{default:o(()=>[l(n,{modelValue:e.searchId,"onUpdate:modelValue":a[0]||(a[0]=t=>e.searchId=t),placeholder:"请输入地址编号"},null,8,["modelValue"])]),_:1}),l(m,{type:"primary",onClick:e.search},{default:o(()=>[r("查询")]),_:1},8,["onClick"]),l(m,{type:"info",onClick:e.research},{default:o(()=>[r("重置")]),_:1},8,["onClick"]),l(m,{type:"success",onClick:e.toAdd},{default:o(()=>[r("添加 ")]),_:1},8,["onClick"])]),l(b,{data:e.receives,style:{width:"95%",margin:"0 auto"}},{default:o(()=>[l(i,{prop:"id",label:"编号",width:"80"}),l(i,{prop:"name",label:"收货人",width:"120"}),l(i,{prop:"memberId",label:"所属会员编号",width:"120"}),l(i,{prop:"phoneNumber",label:"手机号",width:"120"}),l(i,{prop:"postCode",label:"邮政编码",width:"120"}),l(i,{prop:"province",label:"省份/直辖市",width:"100"}),l(i,{prop:"region",label:"区",width:"120"}),l(i,{prop:"city",label:"城市",width:"100"}),l(i,{prop:"detailAddress",label:"详细地址(街道)",width:"120"}),l(i,{label:"是否为默认",width:"100"},{default:o(t=>[r(U(t.row.defaultStatus==0?"不是":"是"),1)]),_:1}),l(i,{fixed:"right",label:"功能管理",width:"140"},{default:o(t=>[l(m,{type:"warning",link:"",size:"small",onClick:C=>e.toEdit(t.row)},{default:o(()=>[r("更新")]),_:2},1032,["onClick"]),l(m,{type:"danger",link:"",size:"small",onClick:C=>e.del(t.row.id)},{default:o(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(f,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,style:{width:"95%",margin:"0 auto"},onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(y,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[11]||(a[11]=t=>e.dialogFormVisible=t),title:"地址编辑"},{footer:o(()=>[c("span",Y,[l(m,{onClick:a[10]||(a[10]=t=>e.dialogFormVisible=!1)},{default:o(()=>[r("取消")]),_:1}),l(m,{type:"primary",onClick:e.save},{default:o(()=>[r("保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[l(V,{model:e.receive},{default:o(()=>[l(d,{label:"收货人","label-width":e.formLabelWidth},{default:o(()=>[l(n,{modelValue:e.receive.name,"onUpdate:modelValue":a[1]||(a[1]=t=>e.receive.name=t),placeholder:"请输入收货人",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"所属会员","label-width":e.formLabelWidth},{default:o(()=>[l(v,{onPageChange:e.pageChange,optionSource:e.members,modelValue:e.receive.memberId,"onUpdate:modelValue":a[2]||(a[2]=t=>e.receive.memberId=t),labelKey:"username",valueKey:"id",style:{width:"90%"},placeholder:"请选择所属会员",paginationOption:e.selectPage},null,8,["onPageChange","optionSource","modelValue","paginationOption"])]),_:1},8,["label-width"]),l(d,{label:"手机号","label-width":e.formLabelWidth},{default:o(()=>[l(n,{modelValue:e.receive.phoneNumber,"onUpdate:modelValue":a[3]||(a[3]=t=>e.receive.phoneNumber=t),placeholder:"请输入手机号",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"邮政编码","label-width":e.formLabelWidth},{default:o(()=>[l(n,{modelValue:e.receive.postCode,"onUpdate:modelValue":a[4]||(a[4]=t=>e.receive.postCode=t),placeholder:"请输入邮政编码",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"省份","label-width":e.formLabelWidth},{default:o(()=>[l(n,{modelValue:e.receive.province,"onUpdate:modelValue":a[5]||(a[5]=t=>e.receive.province=t),placeholder:"请输入省份/直辖市",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"区","label-width":e.formLabelWidth},{default:o(()=>[l(n,{modelValue:e.receive.region,"onUpdate:modelValue":a[6]||(a[6]=t=>e.receive.region=t),placeholder:"请输入区",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"城市","label-width":e.formLabelWidth},{default:o(()=>[l(n,{modelValue:e.receive.city,"onUpdate:modelValue":a[7]||(a[7]=t=>e.receive.city=t),placeholder:"请输入城市",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"详细地址","label-width":e.formLabelWidth},{default:o(()=>[l(n,{modelValue:e.receive.detailAddress,"onUpdate:modelValue":a[8]||(a[8]=t=>e.receive.detailAddress=t),placeholder:"请输入详细地址(街道)",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"是否默认","label-width":e.formLabelWidth},{default:o(()=>[l(w,{modelValue:e.receive.defaultStatus,"onUpdate:modelValue":a[9]||(a[9]=t=>e.receive.defaultStatus=t),placeholder:"请选择是否默认",style:{width:"80%"}},{default:o(()=>[l(g,{label:"不是",value:0}),l(g,{label:"是",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const de=P(J,[["render",Z],["__scopeId","data-v-555c33f8"]]);export{de as default};
